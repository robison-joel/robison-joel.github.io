###############################################################################
# Smb.conf                                                                    #
# SAMBA PDC                                                                   # 
# Criado por :                                                                #
#		Paulo Junior - www.blog.paulojr.info - www.paulojr.info                                                   #
# Vers„o 2.0 : 08/02/2008                                                     #
#                                                                             #
#                                                                             #            
#                                                                             #
###############################################################################

# >> Parametros iniciais <<

# >> Variaveis de ambiente que podem ser usadas <<


#%a     -> sistema operacional do cliente
#%I     -> endere√ßo ip do cliente
#%m     -> nome NetBios do cliente
#%M     -> Nome DNS do cliente

#%u     -> Nome do usuario efetivo
#%U     -> Nome do usuario NetBios
#%g     -> Grupo primario Linux correpondente ao %u
#%G     -> Grupo primario de %U
#%H     -> Diretorio home de %u

#%S     -> Nome do servico corrente

#%d     -> Numero do processo (PID) do servidor corrente
#%h     -> Nome DNS da maquina em que o samba esta rodando
#%L     -> Nome NetBios do servidor samba
#%N     -> Diretorio home do servidor, do mapeamento automount
#%v	-> Vers√£o do samba
#%R   	-> O nivel do protocolo SMB que foi negociado
#%T   	-> Data e horario correntes

##############################################################################



# >>Configura√ß√£o Global<<

[global]

	#Determina o nome NetBios do servidor samba
		netbios name = SAMBA

	#Determina o dominio ou grupo de trabalho no qual o samba vai se anunciar
		workgroup = DOMINIO

	#Define a pontua√ß√£o do servidor samba para ser eleito como PDC, minimo de 33
		os level = 254	

	#Define se o servidor tentar· se tornar o navegador principal do dominio.
		domain master = yes

	#Define se o servidor tentar· ou n„o participar das eleiÁıes para navegador local do grupo de trabalho.
		local master = yes

	#Define se o servidor samba na eleiÁ„o de masterbrowser ter· vantagens.
		prefered master = yes	

	#Define se o servidor samba È um dominio para que clientes faÁam logons
		domain logons = yes


	#Define se o servidor √© o masterbrowser
		master browse = yes
	
	#Determina um comentatio que ira aparecer junto ao ambiente de rede
		server string = Samba %v on (%h)

	#Determina o caminho dos perfis das contas, no exemplo abaixo, ficara em \\nomedoservidor\[Profiles]\nome_da_conta
		logon path = \\%L\Profiles\%U
	
	#Determina o drive de logon
		logon drive = J:
		
	#Determina o logon home ou seja pasta do usu·rio principal manualmente
		logon home = \\%L\homes\%U
	
	#Determina um script de logon padr„o caso deseje
		logon script = nomedoscript.bat ou nomedoscript.cmd
		
	#Define o nivel de seguran√ßa do servidor, s√£o eles [user], [server], e [domain]
		security = user
	
	#Define onde ser„o armazenadas as informaÁıes sobre usu·rios e grupos do dominio, s„o eles [tbsam], [smbpasswd], [ldapsam]
		#passdb backend = tbsam

	#Determina a localiza√ß√£o dos arquivos de log
		log file = /var/log/samba/log.%m
	
	#Define o tamanho maximo do log do samba. Padr„o de 5mb ou 5000kb.

		max log size = 5000

	#Define se ativa ou n„o a gravaÁ„o de data/hora nos arquivos de log gerados pelo samba.
		#debug timestamp = yes

	#Define a ordem de pesquisa da resoluÁ„o de nomes do samba
		name resolve order = lmhosts host wins bcast	

	# Define o nivel de depuraÁ„o do samba nos daemons. valores de 0 a 9.
		#debug level = 1
	
	#Define como o servidor samba vai se anunciar
		#announce as = [NT Server] [NT Workstation] [Windows 9x]

	#Define o programa de senhas utilizado pelo samba
		passwd program = /usr/bin/passwd %u

	#Define o script de logon da conta, no caso abaixo ele ira procurar algum scipts que bate com o mesmo numero da conta criada, portanto Netbios name.
		logon script = %U.bat

	#Define o arquivo onde estao instaladas e configuradas as impressoras no servidor, muito importante caso deseje compartilhar impressoras no samba
		printcap name = /etc/printcap
		load printers = yes

	#Define se tem suporte wins ou nao.
		wins support = yes
		wins proxy = yes
		dns proxy = yes
		max wins ttl = 518400
		wins server = 192.168.xxx.xxx

	#Define o numero de caracteres das senhas e do login
		#password level = 10
		#username level = 10	

	#Define se as restriÁıes do usu·rio nos mÛdulos PAM ter„o efeito tambÈm no samba.
		#obey pam restrictions = yes

	#Define as condiÁıes das senhas.
		#min password length = 5
		#password history = 2
		#user must logon to change password = yes
		#maximum password age = 10
		#minimum password age = 5
		#lockout duration = 3
		#reset count minutes = 2
		#bad lockout attempt = 2

	#Define se o servidor vai mostrar horas
		#time server = yes


		lpq command = lpq -P'%p'

		passwd chat = *New*UNIX*password* %n\n *ReType*new*UNIX*password* %n\n *passwd:*all*authentication*tokens*updated*successfully*

		socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192

		lprm command = lprm -P'%p' %j

		lpresume command = lpc release '%p' %j

		print command = lpr -r -P'%p' %s

		printing = lprng

		queuepause command = lpc stop '%p'

		unix password sync = Yes

		queueresume command = lpc start '%p'

		lppause command = lpc hold '%p' %j

		log level = 1
	#Define se usa caracteres em formato windows
		unix charset = iso8859-1
		display charset = cp850 
	#Define se as palavras v„o ser em minusculas
		preserve case = no
		short preserve case = no
		default case = lower
		



##############################################################################################
#FunÁıes: 
#	comment = [coment·rio] define um comentario 
#	read only = [yes] [no] define se o compartilhamento È ou n„o somente leitura
#	writable = [yes] [no] define se o compartilhamento È ou n„o modo escrita
#	public = [yes] [no] define se o compartilhamento È publico
#	valid users = [user1] [@grupo1] define os usuarios validos a acessar o compartilhamento
#	create mask = [0600] define a mascara em formato de octetos
#	create mode = [0640] define as permissıes padrıes da criaÁ„o de arquivos 
#	force create mode = [0640]
#	directory mask = [0700]
#	force directory mode = [0640]
#	browsable = [yes] [no]
#	locking = [yes] [no]
#	write cache size = [500000]
#	follow symlink = [yes] [no]
#	wide links = [yes] [no]
#	guest ok = [yes] [no]
#	path = [/arquivos/scripts]
#	preserve case = [yes] [no]
#	short preseve case = [yes] [no]
#	default case = [lower] [upper]
#	character set = [iso8859-1]  seleciona a lingua padr„o do samba
#	client code page = [850] Seleciona a p·gina de cÛdigos do samba para tratar os caracteres
#	preserve case = [yes] [no] 
#	valid chars = [·:¡ È:… Û:” ˙:⁄ ‚:¬ Í:  Ù:‘ „:√ ı:‘ ‡:¿ Ú:“] 
#	guest acount = [nobody] [@grupo1] Define a conta local que ser· mapeada quando um usuario se conectar sem senha
#	invalid users = [user1] [@grupo1] Define uma lista de usu·rio que est„o proibidos a acessar o compartilhamento
#	valid users = [user1] [@grupo1] Semelhante a "invalid users" porÈm È ao contr·rio
#	obey pam restrictions = [yes] [no] Indica se as restriÁıes do usu·rio nos mÛdulos PAM ter„o efeito
#
#
#Define se oculta ou nao as exten√ß√µes dos arquivos
#	hide dot files = Yes
#
#Define quais exten√ß√£o v√£o ser ocultadas
#	hide files = /*.mp3/*.wav/*.tif/*.pif/*.mpg/*.mpeg/*.jpg/*.bmp
#
#Define quais exten√ß√µes v√£o ser vetadas, ou seja n√£o poder√£o ser gravadas.
#	veto files = /*.mp3/*.wav/*.tif/*.pif/*.mpg/*.mpeg/*.jpg/*.bmp
#
#Define se o usuario pode ou nao apagar os arquivos vetados.
#	delete veto files = yes
#
#Define uma lixeira 
#     vfs objects = recycle
#     recycle:repository = .recycle
#     recycle:keeptree = True
#     recycle:maxsize = 1024000
#     recycle:versions = True
#     recycle:noversions = .doc|.xls|.ppt|.pdf
#     recycle:touch = False
#     recycle:exclude = *.tmp *.temp *.obj *.~??
#
#
#
#############################################################################################

#SeÁ„o especial do samba, n√£o pode ser esquecida, È a pasta pessoal do login
[homes]
	comment = Pastas dos usuarios
	read only = no
	writable = yes
	public = no
	writeable = Yes
	valid users = %S
	create mask = 0664
	create mode = 0640
	force create mode = 0640
	directory mask = 0775
	force directory mode = 0777
	browsable = yes
	locking = no
	write cache size = 500000

############################################################################################


#Define parametros para os perfis do windows
[Profiles]
	path = /arquivos/profiles
	read only = No
	guest ok = Yes
	writeable = Yes
	browseable = No

############################################################################################

#Define parametros para os scripts de logon da microsoft
[netlogon]
	browseable = no
	comment = Compartilhamento de Scripts
	path = /arquivos/scripts

############################################################################################

#Se√ß√£o especial do samba, n√£o pode ser esquecida
[printers]
	comment = Impressoras ( Todas )
	path = /var/spool/samba
	printable = Yes
	browseable = No
	guest ok = No
	writable = No
	
#############################################################################################

#Define parametros para uma possivel atualiza√ß√£o de anti virus
[base]
	guest ok = No
	writable = yes
	read only = No
	path = /arquivos/antivirus/base

#############################################################################################
#Define parametros para uma impressora
#[hp2100m]
#	comment = Impressora Laser Postscript
#	path = /var/spool/samba
#	printer name = HP
#	browseable = yes
#	printable = yes
#	printer = lp
#	printing = lprng
#	read only = yes
#	guest ok = yes
#	valid users = usuario1, usuario2, @grupo1, @grupo2
#	create mode = 0700

############################################################################################

#Define parametros para o diretoio principal
[samba]
	comment = Diretorio Principal
	path = /arquivos
	read only = No
	force create mode = 0775
	force directory mode = 0775
	guest ok = yes
	writeable = Yes

############################################################################################

#Define um exemplo de compartilhamento
[teste]
	comment = Pasta de teste
	path = /arquivos/teste
#	write list = @suporte
	read only = No
	force create mode = 0775
	force directory mode = 0775
#	valid users = usuario1, usuario2, @grupo1, @grupo2
#	guest ok = Yes
	browseable = Yes
#Define se oculta ou nao as exten√ß√µes dos arquivos
	hide dot files = Yes
#Define quais exten√ß√£o v√£o ser ocultadas
	hide files = /*.mp3/*.wav/*.tif/*.pif/*.mpg/*.mpeg/*.jpg/*.bmp
#Define quais exten√ß√µes v√£o ser vetadas, ou seja n√£o poder√£o ser visualizadas
	veto files = /*.mp3/*.wav/*.tif/*.pif/*.mpg/*.mpeg/*.jpg/*.bmp
#Define se o usuario pode ou nao apagar os arquivos vetados.
	delete veto files = yes
 

###########################################################################################

#Um Exemplo Completo
#[exemplo]
#        comment = Comentario
#        path = /arquivos/teste
#        valid users = @grupo1, @grupo2
#        read only = No
#        create mask = 0777
#        force create mode = 0775
#        force security mode = 0775
#	   guest ok = No
#	   browseable = No
#	   locking = no
#	   write cache size = 500000
#	   share modes = no
#        veto files = /*.mp3/*.wav/*.tif/*.pif/*.jpg/*.bmp
#        hide files = /*.mp3/*.wav/*.tif/*.pif/*.jpg/*.bmp
#        vfs objects = recycle
#        recycle:repository = .recycle
#        recycle:keeptree = True
#        recycle:maxsize = 1024000
#        recycle:versions = True
#        recycle:noversions = .doc|.xls|.ppt|.pdf
#        recycle:touch = False
#        recycle:exclude = *.tmp *.temp *.obj *.~??